from bs4 import BeautifulSoup 
import requests
import csv
url = "http://www.espncricinfo.com/india/content/story/832513.html"
p = requests.get(url).text
s = BeautifulSoup(p)
a = s.find('table',{'class':'StoryengineTable'})
links = a.findAll('a')


f = open('matchBymatch.csv','wb')
wr = csv.writer(f,dialect = 'excel')

RIS = []
SRIS = []
PrIS = []
CHIS = []
for i in range(0,len(links),1):
    playerid = links[i]['href'].rstrip('.html')[-7:].lstrip('er/').lstrip('r/').lstrip('/')
    newLink = 'http://stats.espncricinfo.com/ci/engine/player/' + playerid + '.html?class=3;template=results;type=batting;view=innings'
    p = requests.get(newLink).text
    s = BeautifulSoup(p)
    a = s.findAll('table',{'class':'engineTable'})
    if len(a) > 0:
	    tableBatting = a[3]
        scores = []
        bfs = []
        ris = []
        sris = []
        pris = []
        chis = []
	    rows = tableBatting.findAll('tr')
        for r in rows:
            print r            
